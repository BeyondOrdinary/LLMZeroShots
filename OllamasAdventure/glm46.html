<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ollama's Adventure - Jump & Survive!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            overflow: hidden;
            background: linear-gradient(to bottom, #87CEEB 0%, #98D8E8 50%, #FDB99B 100%);
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .game-container {
            width: 100%;
            max-width: 900px;
            height: 500px;
            position: relative;
            overflow: hidden;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            margin-top: 20px;
            background: transparent;
        }

        /* Parallax Background Layers */
        .parallax-layer {
            position: absolute;
            width: 200%;
            height: 100%;
            bottom: 0;
            background-repeat: repeat-x;
            background-position: 0 bottom;
        }

        .clouds {
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 200"><g fill="white" opacity="0.8"><circle cx="100" cy="100" r="40"/><circle cx="130" cy="95" r="50"/><circle cx="160" cy="100" r="35"/></g><g fill="white" opacity="0.7"><circle cx="400" cy="80" r="35"/><circle cx="430" cy="75" r="45"/><circle cx="460" cy="80" r="30"/></g><g fill="white" opacity="0.6"><circle cx="700" cy="120" r="40"/><circle cx="730" cy="115" r="50"/><circle cx="760" cy="120" r="35"/></g></svg>') 0 center / auto 150px;
            animation: scroll-clouds 30s linear infinite;
            z-index: 1;
        }

        .mountains {
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 300"><polygon points="0,300 0,150 150,50 300,150 300,300" fill="%23A8D5A8"/><polygon points="200,300 200,100 400,20 600,120 600,300" fill="%2389C489"/><polygon points="500,300 500,180 650,80 800,180 800,300" fill="%23A8D5A8"/><polygon points="750,300 750,150 900,60 1050,150 1050,300" fill="%2389C489"/></svg>') 0 bottom / auto 200px;
            animation: scroll-mountains 20s linear infinite;
            z-index: 2;
        }

        .ground {
            background: linear-gradient(to bottom, #8B7355 0%, #6B5637 100%);
            height: 100px;
            bottom: 0;
            z-index: 4;
        }

        .ground::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 20px;
            background: repeating-linear-gradient(
                90deg,
                #90EE90,
                #90EE90 10px,
                #7CB342 10px,
                #7CB342 20px
            );
            top: -20px;
        }

        @keyframes scroll-clouds {
            from { transform: translateX(0); }
            to { transform: translateX(-50%); }
        }

        @keyframes scroll-mountains {
            from { transform: translateX(0); }
            to { transform: translateX(-50%); }
        }

        /* Game Canvas */
        #gameCanvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 5;
        }

        /* Ollama Character */
        .ollama {
            position: absolute;
            bottom: 100px;
            left: 100px;
            width: 80px;
            height: 90px;
            z-index: 10;
            transition: none;
        }

        .ollama-body {
            width: 60px;
            height: 70px;
            background: linear-gradient(135deg, #FFF8DC 0%, #F5DEB3 100%);
            border-radius: 50% 50% 45% 45%;
            position: relative;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
        }

        .ollama-face {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 35px;
        }

        .ollama-eye {
            position: absolute;
            width: 12px;
            height: 14px;
            background: #333;
            border-radius: 50%;
            top: 5px;
            animation: blink 3s infinite;
        }

        .ollama-eye.left { left: 5px; }
        .ollama-eye.right { right: 5px; }

        .ollama-eye::after {
            content: '';
            position: absolute;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            top: 2px;
            right: 2px;
        }

        .ollama-mouth {
            position: absolute;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
            width: 15px;
            height: 8px;
            border: 2px solid #333;
            border-top: none;
            border-radius: 0 0 10px 10px;
        }

        .ollama-ears {
            position: absolute;
            top: -5px;
            width: 100%;
        }

        .ollama-ear {
            position: absolute;
            width: 20px;
            height: 25px;
            background: #FFF8DC;
            border-radius: 50% 50% 0 0;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .ollama-ear.left { left: 5px; transform: rotate(-10deg); }
        .ollama-ear.right { right: 5px; transform: rotate(10deg); }

        .ollama-legs {
            position: absolute;
            bottom: -15px;
            width: 100%;
            display: flex;
            justify-content: space-around;
        }

        .ollama-leg {
            width: 12px;
            height: 20px;
            background: #8B7355;
            border-radius: 0 0 5px 5px;
            animation: walk 0.3s infinite alternate;
        }

        .ollama-leg:nth-child(2) { animation-delay: 0.15s; }
        .ollama-leg:nth-child(4) { animation-delay: 0.15s; }

        @keyframes walk {
            from { transform: translateY(0); }
            to { transform: translateY(-3px); }
        }

        @keyframes blink {
            0%, 90%, 100% { transform: scaleY(1); }
            95% { transform: scaleY(0.1); }
        }

        .jumping .ollama {
            animation: jump 0.5s ease-out;
        }

        @keyframes jump {
            0%, 100% { bottom: 100px; }
            50% { bottom: 250px; }
        }

        /* Obstacles */
        .obstacle {
            position: absolute;
            bottom: 100px;
            right: -60px;
            z-index: 9;
        }

        .cactus {
            width: 40px;
            height: 60px;
            background: linear-gradient(135deg, #228B22 0%, #006400 100%);
            border-radius: 50% 50% 20% 20%;
            position: relative;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
        }

        .cactus::before,
        .cactus::after {
            content: '';
            position: absolute;
            background: inherit;
            border-radius: 50%;
        }

        .cactus::before {
            width: 15px;
            height: 20px;
            top: 10px;
            left: -10px;
        }

        .cactus::after {
            width: 15px;
            height: 25px;
            top: 15px;
            right: -10px;
        }

        .rock {
            width: 50px;
            height: 40px;
            background: linear-gradient(135deg, #8B7D6B 0%, #5D4E37 100%);
            border-radius: 40% 60% 70% 30%;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
        }

        /* UI Elements */
        .ui-panel {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            display: flex;
            justify-content: space-between;
            z-index: 20;
            pointer-events: none;
        }

        .score-display,
        .high-score-display {
            background: rgba(255, 255, 255, 0.95);
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 20px;
            font-weight: bold;
            color: #333;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            animation: float 3s ease-in-out infinite;
        }

        .high-score-display {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: white;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        /* Game Over Modal */
        .game-over-modal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            z-index: 100;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease-out;
        }

        .game-over-modal.show {
            transform: translate(-50%, -50%) scale(1);
        }

        .game-over-title {
            font-size: 36px;
            color: #FF6B6B;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .final-score {
            font-size: 24px;
            color: #333;
            margin-bottom: 10px;
        }

        .new-record {
            font-size: 20px;
            color: #FFD700;
            margin-bottom: 20px;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .retry-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 20px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .retry-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .retry-btn:active {
            transform: translateY(0);
        }

        /* Instructions */
        .instructions {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 16px;
            color: #333;
            z-index: 15;
            animation: fadeInOut 3s ease-in-out;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0; }
            20%, 80% { opacity: 1; }
        }

        /* Sound Button */
        .sound-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            z-index: 21;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: transform 0.2s;
        }

        .sound-toggle:hover {
            transform: scale(1.1);
        }

        .sound-toggle.muted {
            opacity: 0.5;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- Parallax Backgrounds -->
        <div class="parallax-layer clouds"></div>
        <div class="parallax-layer mountains"></div>
        <div class="parallax-layer ground"></div>

        <!-- Game Area -->
        <div class="game-area">
            <div class="ollama" id="ollama">
                <div class="ollama-body">
                    <div class="ollama-ears">
                        <div class="ollama-ear left"></div>
                        <div class="ollama-ear right"></div>
                    </div>
                    <div class="ollama-face">
                        <div class="ollama-eye left"></div>
                        <div class="ollama-eye right"></div>
                        <div class="ollama-mouth"></div>
                    </div>
                    <div class="ollama-legs">
                        <div class="ollama-leg"></div>
                        <div class="ollama-leg"></div>
                        <div class="ollama-leg"></div>
                        <div class="ollama-leg"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- UI Panel -->
        <div class="ui-panel">
            <div class="score-display">Score: <span id="score">0</span></div>
            <div class="high-score-display">Best: <span id="highScore">0</span></div>
        </div>

        <!-- Sound Toggle -->
        <button class="sound-toggle" id="soundToggle">üîä</button>

        <!-- Instructions -->
        <div class="instructions">Press SPACE or Click/Tap to Jump!</div>

        <!-- Game Over Modal -->
        <div class="game-over-modal" id="gameOverModal">
            <div class="game-over-title">ü¶ô Oof! ü¶ô</div>
            <div class="final-score">Final Score: <span id="finalScore">0</span></div>
            <div class="new-record" id="newRecord" style="display: none;">üèÜ New Record! üèÜ</div>
            <button class="retry-btn" onclick="resetGame()">Try Again!</button>
        </div>
    </div>

    <script>
        // Game Variables
        let score = 0;
        let highScore = localStorage.getItem('ollamaHighScore') || 0;
        let isJumping = false;
        let gameSpeed = 5;
        let isGameOver = false;
        let soundEnabled = true;
        let obstacles = [];
        let gameLoop;
        let obstacleSpawnTimer;

        // DOM Elements
        const ollama = document.getElementById('ollama');
        const scoreDisplay = document.getElementById('score');
        const highScoreDisplay = document.getElementById('highScore');
        const gameOverModal = document.getElementById('gameOverModal');
        const finalScoreDisplay = document.getElementById('finalScore');
        const newRecordDisplay = document.getElementById('newRecord');
        const soundToggle = document.getElementById('soundToggle');

        // Audio Context for Sound Effects
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        // Sound Effects
        function playSound(frequency, duration, type = 'sine') {
            if (!soundEnabled) return;
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = frequency;
            oscillator.type = type;
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
        }

        function playJumpSound() {
            playSound(400, 0.1);
            setTimeout(() => playSound(600, 0.1), 50);
            setTimeout(() => playSound(800, 0.1), 100);
        }

        function playCollisionSound() {
            playSound(200, 0.3, 'sawtooth');
            setTimeout(() => playSound(150, 0.3, 'sawtooth'), 100);
        }

        function playScoreSound() {
            playSound(800, 0.05);
            setTimeout(() => playSound(1000, 0.05), 50);
            setTimeout(() => playSound(1200, 0.05), 100);
        }

        function playHighScoreSound() {
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    playSound(600 + i * 200, 0.2);
                    setTimeout(() => playSound(1000 + i * 200, 0.2), 100);
                }, i * 300);
            }
        }

        // Initialize high score display
        highScoreDisplay.textContent = highScore;

        // Sound toggle
        soundToggle.addEventListener('click', () => {
            soundEnabled = !soundEnabled;
            soundToggle.textContent = soundEnabled ? 'üîä' : 'üîá';
            soundToggle.classList.toggle('muted', !soundEnabled);
            if (soundEnabled) playSound(440, 0.1);
        });

        // Jump Function
        function jump() {
            if (isJumping || isGameOver) return;
            
            isJumping = true;
            ollama.classList.add('jumping');
            playJumpSound();
            
            setTimeout(() => {
                ollama.classList.remove('jumping');
                isJumping = false;
            }, 500);
        }

        // Event Listeners
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                jump();
            }
        });

        document.addEventListener('click', (e) => {
            if (e.target.closest('.game-container') && !e.target.closest('button')) {
                jump();
            }
        });

        // Touch support for mobile
        document.addEventListener('touchstart', (e) => {
            if (e.target.closest('.game-container') && !e.target.closest('button')) {
                e.preventDefault();
                jump();
            }
        });

        // Create Obstacle
        function createObstacle() {
            if (isGameOver) return;
            
            const obstacle = document.createElement('div');
            obstacle.className = 'obstacle';
            
            const types = ['cactus', 'rock'];
            const type = types[Math.floor(Math.random() * types.length)];
            
            obstacle.innerHTML = `<div class="${type}"></div>`;
            document.querySelector('.game-area').appendChild(obstacle);
            
            obstacles.push({
                element: obstacle,
                position: 900
            });
        }

        // Check Collision
        function checkCollision(obstacle) {
            const ollamaRect = ollama.getBoundingClientRect();
            const obstacleRect = obstacle.element.getBoundingClientRect();
            
            const buffer = 20; // Collision buffer for better gameplay
            
            return !(
                ollamaRect.right - buffer < obstacleRect.left ||
                ollamaRect.left + buffer > obstacleRect.right ||
                ollamaRect.bottom - buffer < obstacleRect.top ||
                ollamaRect.top + buffer > obstacleRect.bottom
            );
        }

        // Game Loop
        function updateGame() {
            if (isGameOver) return;
            
            // Move obstacles
            obstacles = obstacles.filter(obstacle => {
                obstacle.position -= gameSpeed;
                obstacle.element.style.right = (900 - obstacle.position) + 'px';
                
                // Check collision
                if (checkCollision(obstacle)) {
                    gameOver();
                    return false;
                }
                
                // Remove off-screen obstacles and increment score
                if (obstacle.position < -100) {
                    obstacle.element.remove();
                    score++;
                    scoreDisplay.textContent = score;
                    
                    // Play score sound every 10 points
                    if (score % 10 === 0) {
                        playScoreSound();
                        // Increase speed
                        gameSpeed = Math.min(gameSpeed + 0.5, 15);
                    }
                    
                    return false;
                }
                
                return true;
            });
        }

        // Game Over
        function gameOver() {
            isGameOver = true;
            playCollisionSound();
            
            clearInterval(gameLoop);
            clearInterval(obstacleSpawnTimer);
            
            finalScoreDisplay.textContent = score;
            
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('ollamaHighScore', highScore);
                highScoreDisplay.textContent = highScore;
                newRecordDisplay.style.display = 'block';
                setTimeout(() => playHighScoreSound(), 500);
            } else {
                newRecordDisplay.style.display = 'none';
            }
            
            gameOverModal.classList.add('show');
        }

        // Reset Game
        function resetGame() {
            // Reset variables
            score = 0;
            gameSpeed = 5;
            isGameOver = false;
            scoreDisplay.textContent = score;
            
            // Clear obstacles
            obstacles.forEach(obstacle => obstacle.element.remove());
            obstacles = [];
            
            // Hide modal
            gameOverModal.classList.remove('show');
            
            // Restart game loop
            gameLoop = setInterval(updateGame, 1000 / 60); // 60 FPS
            obstacleSpawnTimer = setInterval(createObstacle, 2000);
        }

        // Start Game
        function startGame() {
            gameLoop = setInterval(updateGame, 1000 / 60);
            obstacleSpawnTimer = setInterval(createObstacle, 2000);
            
            // Create initial obstacle after a short delay
            setTimeout(createObstacle, 1500);
        }

        // Initialize game on load
        window.addEventListener('load', () => {
            startGame();
        });
    </script>
</body>
</html>